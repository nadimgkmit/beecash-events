{"ast":null,"code":"var _jsxFileName = \"/Users/jarvis/dev/beecash-events/app/javascript/packs/pages/users/form.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport React from 'react';\nimport MuiForm from '../../_component/form';\nimport FormLayout from '../../theme/formLayout';\nimport { connect } from 'react-redux';\nimport { crudActions, alertActions } from '../../_actions';\n\nvar Form = /*#__PURE__*/function (_React$Component) {\n  _inherits(Form, _React$Component);\n\n  var _super = _createSuper(Form);\n\n  function Form() {\n    var _this;\n\n    _classCallCheck(this, Form);\n\n    _this = _super.call(this);\n\n    _this.createForm = function () {\n      var form = _this.state.form;\n      var formFields = [];\n      formFields.push({\n        name: 'name',\n        label: 'name',\n        type: 'text',\n        icon: '',\n        value: form.name,\n        validation: 'required'\n      });\n      formFields.push({\n        name: 'details',\n        label: 'Details',\n        type: 'text',\n        value: form.details,\n        validation: null\n      });\n      return formFields;\n    };\n\n    _this.handleChange = function (value, name) {\n      var form = _this.state.form;\n      form[name] = value;\n\n      _this.setState(form);\n    };\n\n    _this.handleSubmit = function (user) {\n      user.pruserDefault();\n      var _this$state = _this.state,\n          action = _this$state.action,\n          id = _this$state.id,\n          form = _this$state.form;\n\n      if (form) {\n        var formData = {\n          name: form.name,\n          details: form.details\n        };\n\n        if (action === 'update') {\n          _this.props.updateData('form', 'users', id, formData);\n        } else {\n          _this.props.createData('form', 'users', formData);\n        }\n      }\n    };\n\n    _this.state = {\n      title: 'Create user',\n      submitText: 'Create',\n      action: 'create',\n      id: null,\n      form: {\n        name: '',\n        details: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Form, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var id = this.props.match.params.id;\n\n      if (id && id !== 'new') {\n        this.props.getData('form', 'users', id);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          title = _this$state2.title,\n          submitText = _this$state2.submitText;\n      return /*#__PURE__*/React.createElement(FormLayout, {\n        title: title,\n        fullWidth: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(MuiForm, {\n        formFields: this.createForm(),\n        handleChange: this.handleChange,\n        handleSubmit: this.handleSubmit,\n        submitText: submitText,\n        submitFullWidth: true,\n        fullWidth: true,\n        noValidate: false,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props) {\n      var newState = {};\n\n      if (props.match.params.id !== 'new' && props.form !== null) {\n        newState.id = props.match.params.id;\n        newState.title = 'Edit user';\n        newState.submitText = 'Edit';\n        newState.action = 'update';\n        newState.form = props.form;\n      }\n\n      if (props.formSubmit) {\n        props.history.push('/users');\n      }\n\n      return newState;\n    }\n  }]);\n\n  return Form;\n}(React.Component);\n\nfunction mapState(state) {\n  var form = state.form,\n      formSubmit = state.formSubmit;\n  return {\n    form: form,\n    formSubmit: formSubmit\n  };\n}\n\nvar actionCreators = {\n  getData: crudActions._get,\n  showError: alertActions.error,\n  createData: crudActions._create,\n  updateData: crudActions._update\n};\nexport default connect(mapState, actionCreators)(Form);","map":{"version":3,"sources":["/Users/jarvis/dev/beecash-events/app/javascript/packs/pages/users/form.jsx"],"names":["React","MuiForm","FormLayout","connect","crudActions","alertActions","Form","createForm","form","state","formFields","push","name","label","type","icon","value","validation","details","handleChange","setState","handleSubmit","user","pruserDefault","action","id","formData","props","updateData","createData","title","submitText","match","params","getData","newState","formSubmit","history","Component","mapState","actionCreators","_get","showError","error","_create","_update"],"mappings":"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","sourcesContent":["import React from 'react';\nimport MuiForm from '../../_component/form'\nimport FormLayout from '../../theme/formLayout'\n\nimport { connect } from 'react-redux';\nimport { crudActions, alertActions } from '../../_actions';\n\nclass Form extends React.Component {\n\n    constructor() {\n        super()\n        this.state = {\n            title: 'Create user',\n            submitText: 'Create',\n            action: 'create',\n            id: null,\n            form: {\n                name: '',\n                details: ''\n            }\n        }\n    }\n\n    createForm = () => {\n        const { form } = this.state\n        let formFields = []\n        formFields.push({\n            name: 'name',\n            label: 'name',\n            type: 'text',\n            icon: '',\n            value: form.name,\n            validation: 'required',\n        })\n\n        formFields.push({\n            name: 'details',\n            label: 'Details',\n            type: 'text',\n            value: form.details,\n            validation: null,\n        })\n\n        return formFields\n    }\n\n    componentDidMount() {\n        const { id } = this.props.match.params\n        if (id && id !== 'new') {\n            this.props.getData('form', 'users', id)\n        }\n    }\n\n    static getDerivedStateFromProps(props) {\n        let newState = {};\n\n        if (props.match.params.id !== 'new' && props.form !== null) {\n            newState.id = props.match.params.id\n            newState.title = 'Edit user'\n            newState.submitText = 'Edit'\n            newState.action = 'update'\n            newState.form = props.form\n        }\n\n        if (props.formSubmit) {\n            props.history.push('/users')\n        }\n\n        return newState\n    }\n\n    handleChange = (value, name) => {\n        const { form } = this.state\n        form[name] = value\n        this.setState(form)\n    }\n\n    handleSubmit = (user) => {\n        user.pruserDefault();\n        const { action, id, form } = this.state\n        if (form) {\n            const formData = {\n                name: form.name,\n                details: form.details,\n            }\n            if (action === 'update') {\n                this.props.updateData('form', 'users', id, formData)\n            } else {\n                this.props.createData('form', 'users', formData)\n            }\n        }\n    }\n\n    render() {\n        const { title, submitText } = this.state\n        return (\n            <FormLayout title={title} fullWidth={false}>\n                <MuiForm\n                    formFields={this.createForm()}\n                    handleChange={this.handleChange}\n                    handleSubmit={this.handleSubmit}\n                    submitText={submitText}\n                    submitFullWidth={true}\n                    fullWidth={true}\n                    noValidate={false}\n                />\n            </FormLayout >\n        );\n    }\n}\n\nfunction mapState(state) {\n    const { form, formSubmit } = state;\n    return {\n        form,\n        formSubmit\n    };\n}\n\nconst actionCreators = {\n    getData: crudActions._get,\n    showError: alertActions.error,\n    createData: crudActions._create,\n    updateData: crudActions._update,\n};\n\nexport default connect(mapState, actionCreators)(Form);\n"]},"metadata":{},"sourceType":"module"}